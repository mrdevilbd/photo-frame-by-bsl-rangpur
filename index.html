<!DOCTYPE html>
<!DOCTYPE html>
<html lang="bn">
<head>
    <meta property="og:image" content="og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="নৌকা ছাড়া কীসের ভোট? No Boat No Vote" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Boat No Vote | DP Maker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f0f2f5;
        }

        #canvas-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            aspect-ratio: 1 / 1;
            margin: 0 auto;
            overflow: hidden;
            border: 5px solid #fff;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            background: #e5e7eb;
            touch-action: none;
        }

        #photo-canvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: move;
        }

        #frame-overlay-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            object-fit: contain;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-weight: 600;
            color: #4b5563;
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="p-4">

    <div class="max-w-xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden p-6 md:p-8">
        <h1 class="text-3xl font-bold text-center text-indigo-700 mb-2">No Boat No Vote</h1>
        <p class="text-center text-gray-500 mb-8 text-sm">Chrome/Safari ব্রাউজারে ওপেন করুন। আপনার পছন্দের ছবিটি আপলোড করুন। সুন্দরভাবে ছবিটি বসানোর পর একদম নিচে ডাউনলোড বাটনে চাপ দিয়ে ❝নো বোট নো ভোট❞ ছবিটি ডাউনলোড করুন।</p>
        <p class="text-center text-gray-500 mb-8 text-sm">সাথে হ্যাশট্যাগ ব্যবহার করুন #NoBoatNoVote</p>

        <!-- Canvas Area -->
        <div id="canvas-container" class="rounded-xl mb-8">
            <canvas id="photo-canvas"></canvas>
            <!-- Frame Preview -->
            <img id="frame-overlay-img" src="https://uploads.onecompiler.io/44c8fceju/44c8cxhyr/frame.png" alt="No Boat No Vote Frame">
        </div>

        <div class="space-y-6">
            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                <label class="slider-label text-blue-700">আপনার ছবি সিলেক্ট করুন:</label>
                <input type="file" id="imageInput" accept="image/*" class="w-full text-sm text-gray-500 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:bg-blue-600 file:text-white hover:file:bg-blue-700 cursor:pointer">
            </div>

            <div id="controls-panel" class="bg-gray-50 p-5 rounded-2xl space-y-4 border border-gray-100 opacity-50 pointer-events-none">
                <div>
                    <div class="slider-label"><span>জুম ইন/আউট</span><span id="zoomVal">1.0x</span></div>
                    <input type="range" id="zoomSlider" min="0.01" max="2.5" step="0.01" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="slider-label">ডানে-বামে সরান</label>
                        <input type="range" id="posXSlider" min="-1000" max="1000" step="1" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600">
                    </div>
                    <div>
                        <label class="slider-label">উপরে-নিচে সরান</label>
                        <input type="range" id="posYSlider" min="-1000" max="1000" step="1" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600">
                    </div>
                </div>
            </div>

            <button id="downloadBtn" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 px-4 rounded-2xl shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                ছবি ডাউনলোড করুন
            </button>
        </div>
        
    </div>

    <canvas id="final-canvas" style="display:none;"></canvas>

    <script>
        const canvas = document.getElementById('photo-canvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('canvas-container');
        const frameImg = document.getElementById('frame-overlay-img');
        const imageInput = document.getElementById('imageInput');
        const zoomSlider = document.getElementById('zoomSlider');
        const posXSlider = document.getElementById('posXSlider');
        const posYSlider = document.getElementById('posYSlider');
        const downloadBtn = document.getElementById('downloadBtn');
        const controlsPanel = document.getElementById('controls-panel');

        let userImg = new Image();
        let fixedFrame = new Image();
        
        fixedFrame.crossOrigin = "anonymous";
        
        function loadFrame() {
            fixedFrame.src = frameImg.src;
        }
        
        loadFrame();

        let imgX = 0, imgY = 0, imgScale = 1;
        let isDragging = false, startX = 0, startY = 0;

        function initCanvas() {
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            draw();
        }
        window.addEventListener('load', initCanvas);
        window.addEventListener('resize', initCanvas);

        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (f) => {
                    userImg = new Image();
                    userImg.onload = () => {
                        controlsPanel.style.opacity = "1";
                        controlsPanel.style.pointerEvents = "auto";
                        const scW = canvas.width / userImg.width;
                        const scH = canvas.height / userImg.height;
                        imgScale = Math.max(scW, scH);
                        zoomSlider.value = imgScale;
                        document.getElementById('zoomVal').innerText = imgScale.toFixed(2) + "x";
                        imgX = (canvas.width - userImg.width * imgScale) / 2;
                        imgY = (canvas.height - userImg.height * imgScale) / 2;
                        posXSlider.value = imgX;
                        posYSlider.value = imgY;
                        draw();
                    };
                    userImg.src = f.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        function draw() {
            if (!userImg.src) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(userImg, imgX, imgY, userImg.width * imgScale, userImg.height * imgScale);
        }

        [zoomSlider, posXSlider, posYSlider].forEach(slider => {
            slider.addEventListener('input', () => {
                imgScale = parseFloat(zoomSlider.value);
                imgX = parseInt(posXSlider.value);
                imgY = parseInt(posYSlider.value);
                document.getElementById('zoomVal').innerText = imgScale.toFixed(2) + "x";
                draw();
            });
        });

        function handleStart(e) {
            if (!userImg.src) return;
            isDragging = true;
            const p = e.touches ? e.touches[0] : e;
            const rect = canvas.getBoundingClientRect();
            startX = p.clientX - rect.left - imgX;
            startY = p.clientY - rect.top - imgY;
        }
        function handleMove(e) {
            if (isDragging) {
                const p = e.touches ? e.touches[0] : e;
                const rect = canvas.getBoundingClientRect();
                imgX = p.clientX - rect.left - startX;
                imgY = p.clientY - rect.top - startY;
                posXSlider.value = imgX;
                posYSlider.value = imgY;
                draw();
            }
        }
        function handleEnd() { isDragging = false; }

        container.addEventListener('mousedown', handleStart);
        window.addEventListener('mousemove', handleMove);
        window.addEventListener('mouseup', handleEnd);
        container.addEventListener('touchstart', handleStart);
        window.addEventListener('touchmove', handleMove);
        window.addEventListener('touchend', handleEnd);

        downloadBtn.addEventListener('click', () => {
            if (!userImg.src) {
                alert("ছবি আপলোড করুন।");
                return;
            }

            try {
                const finalCanvas = document.getElementById('final-canvas');
                const fCtx = finalCanvas.getContext('2d');
                const size = 1200; 
                finalCanvas.width = size;
                finalCanvas.height = size;
                const ratio = size / canvas.width;

                fCtx.fillStyle = "#ffffff";
                fCtx.fillRect(0, 0, size, size);

                fCtx.drawImage(userImg, imgX * ratio, imgY * ratio, (userImg.width * imgScale) * ratio, (userImg.height * imgScale) * ratio);
                fCtx.drawImage(fixedFrame, 0, 0, size, size);

                const dataURL = finalCanvas.toDataURL('image/png', 1.0);
                const link = document.createElement('a');
                link.download = 'NoBoat_NoVote_' + Date.now() + '.png';
                link.href = dataURL;
                link.click();
            } catch (error) {
                console.error(error);
                alert("সমস্যা হয়েছে। ফ্রেমের ফাইলটি (no-boat-no-vote.png) উপলভ্য নয়।");
            }
        });
    </script>
</body>

</html>


